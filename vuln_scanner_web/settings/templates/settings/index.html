<!-- network_scans/templates/network_scans/home.html -->
{% extends "base.html" %}

{% block title %}
Settings
{% endblock %}

{% block content %}
<main class="web-server-page">
    <div class="border bg-white" style="max-width: 400px;padding: 15px; min-width:350px;">
        <h3>Manage Wordlists</h3>
        <div class="list-group mt-3">
            {% for file in wordlist_files %}
                <div class="list-group-item d-flex justify-content-between align-items-center">
                    {{ file }}
                    <form action="{% url 'delete_wordlist' %}" method="post" class="ml-auto">
                        {% csrf_token %}
                        <input type="hidden" name="filename" value="{{ file }}">
                        <button type="submit" class="btn btn-danger btn-sm">X</button>
                    </form>
                </div>
            {% empty %}
                <div class="list-group-item">No wordlists available.</div>
            {% endfor %}
        </div>

        <form method="post" enctype="multipart/form-data">
            {% csrf_token %}
            {{ form.as_p }}
            <button type="submit">Upload Wordlist</button>
        </form>
        {% if success_message %}
            <div class="alert alert-success" role="alert">
                {{ success_message }}
            </div>
        {% endif %}
    </div>

    <!-- Proxy Management -->
    <div class="border bg-white" style="max-width: 400px;padding: 15px; min-width:350px;">
        <h3>Manage Proxies</h3>
        <form method="post">
            {% csrf_token %}
            {{ proxy_form.as_p }}
            <button type="submit" name="add_proxy" class="btn btn-primary">Add Proxy</button>
        </form>
        <form method="post">
            {% csrf_token %}
            <!-- ... [other form elements if any] ... -->
            <button type="submit" name="check_proxies" class="btn btn-primary">Check Proxies</button>
        </form>

        <!-- Proxy List with Pagination -->
        <div class="list-group mt-3">
            {% for proxy in page_obj %}
                <form method="post" class="list-group-item d-flex justify-content-between align-items-center">
                    {% csrf_token %}
                    <span>{{ proxy }}</span>
                    <button type="submit" name="remove_proxy" value="{{ proxy }}" class="btn btn-danger btn-sm">Remove</button>
                </form>
            {% empty %}
                <div class="list-group-item">No proxies available.</div>
            {% endfor %}
        </div>

        <!-- Pagination Controls -->
        <div class="pagination">
            <span class="step-links">
                {% if page_obj.has_previous %}
                    <a href="?page=1">&laquo; first</a>
                    <a href="?page={{ page_obj.previous_page_number }}">previous</a>
                {% endif %}

                <span class="current">
                    Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}.
                </span>

                {% if page_obj.has_next %}
                    <a href="?page={{ page_obj.next_page_number }}">next</a>
                    <a href="?page={{ page_obj.paginator.num_pages }}">last &raquo;</a>
                {% endif %}
            </span>
        </div>
    </div>
</main>
{% endblock %}